default_platform(:ios)

platform :ios do
  desc "Build and upload app to TestApp.io"
  lane :beta do
    match(
      type: "adhoc", # أو "development" حسب نوع التوقيع اللي خزّنته في repo
      readonly: false,
      git_url: ENV["MATCH_GIT_URL"]
    )

    build_app(
      scheme: "TestCiApp",
      export_method: "ad-hoc"
    )

    upload_to_testappio(
      api_token: ENV["TESTAPPIO_API_TOKEN"],
      app_id: "9QorGVmE7M"
    )
  end
end
