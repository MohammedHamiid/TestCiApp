default_platform(:ios)

platform :ios do
  desc "Build and upload app to TestApp.io"
  lane :beta do

    # تحميل الشهادات من Match
    match(
      type: "adhoc",
      username: "m.hamid@lamsaworld.com",
      git_url: "https://github.com/MohammedHamiid/ios-certificates.git"
    )

    # بناء التطبيق
    build_app(
      scheme: "TestCiApp"
    )

    # رفع التطبيق على TestApp.io
    upload_to_testappio(
      api_token: "0db11f3c-d0d7-4b1c-8c76-8197063b74a5",
      app_id: "9QorGVmE7M"
    )
  end
end
